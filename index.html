<!DOCTYPE html> 
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>–ö–æ—Ä–ø–æ—Ä–∞—Ü–∏—è –ú–ï–ö–û–ú ‚Äî –ú–≠–ö–û–ú —á–µ–º–ø–∏–æ–Ω–∞—Ç</title>
<meta name="description" content="–ú–≠–ö–û–ú ‚Äî —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ –∏–≥—Ä—ã –º–µ–∂–¥—É –∫–ª–∞—Å—Å–∞–º–∏ (7‚Äì11). –ü—Ä–∞–≤–∏–ª–∞, —Å–µ—Ç–∫–∞, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è." />
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#f7fbff;
    --blue:#005BFF;
    --blue-2:#2b7bff;
    --soft:#A7D8FF;
    --muted:#6b7280;
    --card:#ffffff;
    --glass: rgba(255,255,255,0.8);
    --radius:14px;
    --maxwidth:980px;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family:'Poppins',system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial;
    background: linear-gradient(180deg,var(--bg),#ffffff);
    color:#0b1220;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    line-height:1.45;
    -webkit-tap-highlight-color:transparent;
  }
  a{color:inherit;text-decoration:none}
  img{max-width:100%;height:auto;display:block}
  .wrap{max-width:var(--maxwidth);margin:0 auto;padding:18px}

  /* ---------- HERO ---------- */
  header.hero{
    position:relative;
    overflow:hidden;
    border-radius:18px;
    padding:18px;
    background:
      radial-gradient(600px 120px at -10% 0%, rgba(37,98,255,0.06), transparent 6%),
      linear-gradient(180deg, rgba(8,36,102,0.04), rgba(255,255,255,0.9));
    box-shadow:0 8px 30px rgba(12,24,60,0.06);
  }
  .hero-row{display:flex;gap:12px;align-items:center}
  .logo{
    width:72px;height:72px;border-radius:14px;background:linear-gradient(135deg,var(--blue),var(--blue-2));
    display:flex;align-items:center;justify-content:center;color:white;font-weight:800;font-size:20px;
    flex-shrink:0;box-shadow:0 6px 18px rgba(41,82,255,0.16);
    transform-origin:center; animation:logo-bob 3s ease-in-out infinite;
  }
  @keyframes logo-bob{0%,100%{transform:translateY(0)}50%{transform:translateY(-6px)}}
  .hero h1{font-size:18px;margin:0;color:var(--blue);letter-spacing:-0.2px}
  .hero .tag{margin-top:6px;color:var(--muted);font-size:13px}
  .hero .ctas{display:flex;gap:10px;margin-top:10px}
  .btn{
    display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:12px;font-weight:700;font-size:14px;
    cursor:pointer;border:0;box-shadow:0 8px 24px rgba(10,30,120,0.06);
  }
  .btn-primary{background:linear-gradient(90deg,var(--blue),var(--blue-2));color:white; animation:btn-glow 2.4s infinite;}
  @keyframes btn-glow{0%{box-shadow:0 8px 20px rgba(0,91,255,0.14)}50%{box-shadow:0 14px 30px rgba(0,91,255,0.22)}100%{box-shadow:0 8px 20px rgba(0,91,255,0.14)}}
  .btn-ghost{background:#fff;border:1px solid rgba(10,40,120,0.06);color:var(--muted)}

  /* floating riff icons on hero */
  .floaters{position:absolute;inset:0;pointer-events:none;overflow:hidden}
  .riff {
    position:absolute;width:48px;height:48px;border-radius:50%;display:flex;align-items:center;justify-content:center;
    background:linear-gradient(180deg,var(--soft),#e6f3ff);color:var(--blue);opacity:0.95;box-shadow:0 6px 18px rgba(10,30,100,0.08);
    transform-origin:center;
    will-change:transform;
  }
  .riff.small{width:34px;height:34px}
  @keyframes riff-float {0%{transform:translateY(0) rotate(0)}50%{transform:translateY(-12px) rotate(8deg)}100%{transform:translateY(0) rotate(0)}}

  /* ---------- SECTIONS ---------- */
  section{margin-top:18px;padding:16px;border-radius:14px;background:var(--card);box-shadow:0 8px 26px rgba(12,24,56,0.04)}
  h2{margin:0 0 8px 0;font-size:16px;color:var(--blue)}
  p.muted{color:var(--muted);font-size:13px;margin:0}
  .cols{display:grid;grid-template-columns:1fr;gap:12px}
  @media(min-width:720px){ .cols{grid-template-columns:1fr 360px} }

  /* ---------- HOW TO PLAY (cards) ---------- */
  .steps{display:grid;grid-template-columns:repeat(2,1fr);gap:10px}
  @media(max-width:480px){ .steps{grid-template-columns:1fr} }
  .card{
    background:linear-gradient(180deg,#fff,#fbfdff);
    padding:12px;border-radius:12px;border:1px solid rgba(10,40,120,0.04);
    display:flex;gap:10px;align-items:flex-start;transition:transform .28s ease, box-shadow .28s ease;
  }
  .card:hover{transform:translateY(-6px);box-shadow:0 18px 40px rgba(30,60,140,0.08)}
  .icon{
    width:48px;height:48px;border-radius:10px;background:linear-gradient(135deg,var(--blue),var(--soft));display:flex;align-items:center;justify-content:center;color:white;font-weight:700;
    box-shadow:0 10px 24px rgba(10,60,200,0.08);flex-shrink:0;
  }
  .card h3{margin:0;font-size:15px;color:#0b234d}
  .card p{margin:6px 0 0 0;color:var(--muted);font-size:13px}

  /* nested list in step 3 */
  .strategy{margin-top:8px;padding-left:12px}
  .strategy li{margin:6px 0;color:var(--muted);font-size:13px;line-height:1.4}

  /* ---------- PRIZES TABLE ---------- */
  table{width:100%;border-collapse:collapse;font-size:14px}
  thead td{background:linear-gradient(90deg,var(--blue),var(--blue-2));color:white;padding:10px;border-radius:8px 8px 0 0;font-weight:700}
  tbody td{padding:12px;border-bottom:1px dashed rgba(10,30,80,0.04)}
  .amount{font-weight:800;text-align:right;color:var(--blue-2);font-variant-numeric:tabular-nums}

  /* ---------- PRIZES SECTION (styling taken from "–∫–∞—à–∞") ---------- */
  .prizes-section{
    background: linear-gradient(90deg,var(--blue),var(--blue-2));
    color: #fff;
    border-radius:12px;
    padding:12px;
    box-shadow:0 12px 34px rgba(10,30,80,0.08);
    margin-top:12px;
  }
  .prizes-section .section-title{
    font-weight:800;
    margin:6px 0 10px 0;
    font-size:15px;
    display:flex;
    align-items:center;
    gap:10px;
    animation:prizesFadeIn 520ms cubic-bezier(.2,.9,.2,1);
  }
  .prizes-table{
    display:flex;
    flex-direction:column;
    gap:10px;
    margin-top:6px;
  }
  .prize-row{
    display:flex;justify-content:space-between;align-items:center;
    padding:10px 12px;border-radius:10px;background:rgba(255,255,255,0.06);
    font-weight:700;
    animation:prizeRowIn 420ms ease;
  }
  .prize-row .label{font-weight:700}
  .prize-row .value{font-variant-numeric:tabular-nums}
  .prize-row.highlight{
    background:linear-gradient(90deg,#fff5cc,#ffe680);
    color:#533f00;
    box-shadow:0 10px 30px rgba(255,193,7,0.06);
  }
  @keyframes prizesFadeIn { from{opacity:0;transform:translateY(-6px)} to{opacity:1;transform:none} }
  @keyframes prizeRowIn { from{opacity:0;transform:translateY(6px)} to{opacity:1;transform:none} }

  /* ---------- WHY MEKOM ---------- */
  .why{display:flex;gap:12px;align-items:center}
  .why .text{flex:1}
  .badge{background:linear-gradient(90deg,var(--soft),#cfeaff);padding:8px 10px;border-radius:10px;color:var(--blue);font-weight:700}

  /* ---------- FORM ---------- */
  form input, form select, form textarea{width:100%;padding:10px;margin-top:8px;border-radius:10px;border:1px solid rgba(10,30,80,0.06);font-size:14px}
  .submit{margin-top:10px;width:100%}
  .small{font-size:13px;color:var(--muted)}

  /* make t.me links clearly clickable */
  a[href^="https://t.me"]{color:var(--blue);font-weight:700;text-decoration:none}
  a[href^="https://t.me"]:hover{ text-decoration:underline }

  /* ---------- FOOTER ---------- */
  footer{margin-top:14px;text-align:center;color:var(--muted);font-size:13px;padding:14px}

  /* ---------- Animations ---------- */
  .fade-in{opacity:0;transform:translateY(12px);transition:all 560ms cubic-bezier(.2,.9,.2,1)}
  .fade-in.show{opacity:1;transform:none}
  .typing{display:inline-block;white-space:nowrap;overflow:hidden;border-right:2px solid rgba(0,0,0,0.12)}
  @keyframes pulse-blue{0%{transform:scale(1)}50%{transform:scale(1.03)}100%{transform:scale(1)}}
  .pulse{animation:pulse-blue 2400ms infinite}

  /* small helpers */
  .flex{display:flex;gap:8px;align-items:center}
  .muted-2{color:#4b5563;font-size:13px}

  /* ===========================================================
     MECOM BRACKET ‚Äî –∑–∞–º–µ–Ω—ë–Ω–Ω—ã–π –±–ª–æ–∫ —Å—Ç–∏–ª–µ–π (—É–ª—É—á—à–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)
     =========================================================== */
  .mecom-bracket{--me-blue:#005BFF;--me-blue-2:#2b7bff;--me-soft:#A7D8FF;background: linear-gradient(90deg,rgba(7,48,159,0.03),rgba(0,91,255,0.02));border-radius:12px;padding:10px;box-sizing:border-box;color:#0b1220;font-family:'Poppins',system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;}
  .mecom-rounds-nav{display:flex;gap:6px;position:sticky;top:8px;z-index:5;margin-bottom:8px;overflow-x:auto;-webkit-overflow-scrolling:touch;scrollbar-width:none;}
  .mecom-rounds-nav::-webkit-scrollbar{display:none;}
  .mecom-rounds-nav .mecom-chip{background:rgba(0,91,255,0.06);color:var(--me-blue);padding:8px 10px;border-radius:999px;font-weight:700;cursor:pointer;border:0;font-size:12px;white-space:nowrap;}
  .mecom-rounds-nav .mecom-chip.is-active{background:linear-gradient(90deg,var(--me-blue),var(--me-blue-2));color:#fff;}

  /* important layout tweak: top-align slides so short slides don't force big container space */
  .mecom-swiper{position:relative;overflow:hidden;border-radius:10px;background:linear-gradient(180deg,#fff,#f7fbff);border:1px solid rgba(10,30,80,0.04);transition:height .26s ease;}
  .mecom-swiper-track{display:flex;width:100%;will-change:transform;transform:translate3d(0,0,0);transition:transform .26s ease;touch-action:pan-y;align-items:flex-start;}
  .mecom-slide{min-width:100%;padding:10px;align-self:flex-start;display:flex;flex-direction:column;}
  .mecom-round-title{font-weight:800;margin-bottom:8px;color:#0b234d;display:flex;justify-content:space-between;align-items:center}

  /* PACK & TEAM: layout (class/branch on left; team name on right) */
  .pack{border-radius:12px;padding:10px;background:linear-gradient(180deg,#fff,#fbfdff);border:1px solid rgba(10,40,120,0.04);margin-bottom:12px}
  .pack-title{font-weight:800;color:#0b234d;margin-bottom:8px;display:flex;align-items:center;gap:8px}
  .pack-contents{display:flex;flex-direction:column;gap:8px}
  .mecom-team{display:flex;justify-content:space-between;align-items:center;padding:12px;border-radius:10px;background:rgba(0,0,0,0.03);transition:transform .18s ease, box-shadow .18s ease}
  .mecom-team:hover{transform:translateY(-3px);box-shadow:0 10px 24px rgba(10,30,80,0.06)}
  .mecom-team .left{display:flex;flex-direction:column;gap:6px;min-width:95px}
  .mecom-team .name-wrap{display:flex;flex-direction:column;align-items:flex-end;gap:4px}
  .mecom-team .team-name{font-weight:800;font-size:15px;color:#0b234d;white-space:nowrap}
  .mecom-team.empty-slot{opacity:0.6;font-style:italic;color:var(--muted);padding:6px 12px;height:28px;display:flex;align-items:center;justify-content:flex-end;}
  .mecom-team.placeholder{background:transparent;border:1px dashed rgba(0,0,0,0.03)}

  /* TAGS: –∫–ª–∞—Å—Å –∏ —Ñ–∏–ª–∏–∞–ª ‚Äî —Ü–≤–µ—Ç–Ω—ã–µ –ø–∏–ª–ª—ã */
  .mecom-tag{font-size:11px;font-weight:800;padding:4px 6px;border-radius:999px;line-height:1;display:inline-block}
  .mecom-tag-grade{background:rgba(0,0,0,0.06);color:#111}
  .mecom-tag-north{background:rgba(10,92,255,0.09);color:var(--blue)}
  .mecom-tag-south{background:rgba(255,59,59,0.10);color:#c0392b}
  .mecom-tag-east{background:rgba(255,160,60,0.10);color:#d35400}
  .mecom-tag-west{background:rgba(88,165,90,0.10);color:#1e9b4a}

  /* WINNERS */
  .mecom-team.winner{background:linear-gradient(90deg,var(--me-soft),#dff4ff);box-shadow:0 10px 30px rgba(0,110,255,0.06)}
  .mecom-team.winner .team-name{color:var(--blue)}
  .mecom-team.winner .team-name::after{content:" üèÖ";margin-left:8px}

  /* CHAMPION style */
  .mecom-team.champion{background: linear-gradient(90deg,#fff5cc,#ffe680);color:#533f00;border:1px solid rgba(255,193,7,0.12);box-shadow:0 12px 30px rgba(255,193,7,0.08)}
  .mecom-team.champion .team-name{ color:#533f00 }
  .mecom-team.champion .team-name::after{ content: " üëë"; margin-left:8px; }

  .promoted-note{font-size:12px;color:var(--muted);margin-top:6px}

  .mecom-dots{display:flex;justify-content:center;gap:6px;padding:10px 0 2px 0}
  .mecom-dot{width:8px;height:8px;border-radius:50%;background:rgba(0,0,0,0.15)}
  .mecom-dot.is-active{background:var(--me-blue)}

  @media(min-width:960px){ .mecom-swiper{ border-radius:12px } }
  @media (max-width:560px){ .mecom-team .team-name{ font-size:14px } }
</style>
</head>
<body>
  <div class="wrap">
    <!-- HERO -->
    <header class="hero">
      <div class="floaters" aria-hidden="true">
        <div class="riff" style="left:6%;top:10%"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" r="10" fill="white" opacity="0.06"/><path d="M6 12c2-5 10-5 10 0-2 5-10 5-10 0z" fill="#005BFF" opacity="0.18"/></svg></div>
        <div class="riff small" style="right:6%;top:22%"><svg width="18" height="18" viewBox="0 0 24 24"><path d="M6 12c2-5 10-5 10 0-2 5-10 5-10 0z" fill="#2b7bff"/></svg></div>
        <div class="riff" style="left:8%;bottom:10%"><svg width="24" height="24" viewBox="0 0 24 24"><path d="M12 3c5 0 9 4 9 9s-4 9-9 9S3 17 3 12 7 3 12 3z" fill="#A7D8FF"/></svg></div>
      </div>

      <div class="hero-row">
        <div class="logo" aria-hidden="true">–ú–ï–ú</div>
        <div style="flex:1">
          <h1 id="hero-title">–ú–≠–ö–û–ú ‚Äî —ç–∫–æ–Ω–æ–º–∏–∫–∞, –∞–∑–∞—Ä—Ç –∏ —Ä–∏—Ñ</h1>
          <div class="tag muted"> –ö–æ—Ä–ø–æ—Ä–∞—Ü–∏—è –ú–ï–ö–û–ú ‚Äî —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ –∏–≥—Ä—ã –º–µ–∂–¥—É —Å—Ç–∞—Ä—à–∏–º–∏ –∫–ª–∞—Å—Å–∞–º–∏ (—Å 7 –ø–æ 11, –Æ–∂–Ω–æ–≥–æ –∏ –°–µ–≤–µ—Ä–Ω–æ–≥–æ —Ñ–∏–ª–∏–∞–ª–∞) —à–∫–æ–ª—ã –í–∑–º–∞—Ö </div>
          <div class="ctas">
            <button class="btn btn-primary" onclick="scrollToId('how')">–ö–∞–∫ –∏–≥—Ä–∞—Ç—å</button>
            <button class="btn btn-ghost" onclick="scrollToId('reg')">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
          </div>
        </div>
      </div>
    </header>

    <!-- ABOUT / WHAT IS MEKOM -->
    <section id="about" class="fade-in">
      <h2>–ß—Ç–æ —Ç–∞–∫–æ–µ –ú–≠–ö–û–ú?</h2>
      <p class="muted">–ú–≠–ö–û–ú ‚Äî –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —à–∫–æ–ª—å–Ω–∞—è —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∞—è –∏–≥—Ä–∞: –∫–æ–º–∞–Ω–¥—ã –∏–∑ —Ä–∞–∑–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤ —Å–æ—Ä–µ–≤–Ω—É—é—Ç—Å—è –≤ —Å–µ—Ä–∏—è—Ö —Ä–∞—É–Ω–¥–æ–≤, –ø—Ä–∏–Ω–∏–º–∞—é—Ç –±–∏–∑–Ω–µ—Å-—Ä–µ—à–µ–Ω–∏—è –∏ ¬´–∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç¬ª –Ω–∞–∏–≤—ã—Å—à–∏–π <strong>—Ä–∏—Ñ</strong> ‚Äî —Ä–µ–π—Ç–∏–Ω–≥–æ–≤—ã–π –∏–Ω–¥–µ–∫—Å —Ñ–∏—Ä–º—ã. –ß–µ–º –ª—É—á—à–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –∏ –∫–æ–º–∞–Ω–¥–Ω–∞—è –∏–≥—Ä–∞, —Ç–µ–º –≤—ã—à–µ —à–∞–Ω—Å –ø—Ä–æ–π—Ç–∏ –≤ —Ñ–∏–Ω–∞–ª.</p>
      <div style="margin-top:12px" class="cols">
        <div>
          <div class="card" style="align-items:flex-start">
            <div class="icon" aria-hidden="true">–†</div>
            <div>
              <h3>–î–ª—è –∫–æ–≥–æ?</h3>
              <p class="muted">–ö–æ–º–∞–Ω–¥—ã –∫–ª–∞—Å—Å–æ–≤ 7‚Äì11 –∏–∑ –Æ–∂–Ω–æ–≥–æ –∏ –°–µ–≤–µ—Ä–Ω–æ–≥–æ —Ñ–∏–ª–∏–∞–ª–æ–≤. –ö–∞–∂–¥—ã–π —Ä–∞—É–Ω–¥ ‚Äî –Ω–æ–≤–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–∫–∞–∑–∞—Ç—å —Å–º–µ–∫–∞–ª–∫—É.</p>
            </div>
          </div>

          <div class="card" style="margin-top:10px">
            <div class="icon" aria-hidden="true">‚öñ</div>
            <div>
              <h3>–¶–µ–ª—å</h3>
              <p class="muted">–ù–∞–±–∏—Ä–∞—Ç—å –Ω–∞–∏–±–æ–ª—å—à–∏–π —Ä–∏—Ñ –≤ –∏–≥—Ä–∞—Ö –∏ –ø—Ä–æ–π—Ç–∏ —á–µ—Ä–µ–∑ —Ç—É—Ä–Ω–∏—Ä–Ω—É—é —Å–µ—Ç–∫—É –¥–æ —Ñ–∏–Ω–∞–ª–∞ ‚Äî —Ç–∞–º —Ä–µ—à–∞–µ—Ç—Å—è –≤—Å—ë.</p>
            </div>
          </div>
        </div>

        <aside class="bracket-info fade-in" style="padding:8px">
          <div class="chip highlight">–ë–ª–∏–∂–∞–π—à–∏–π —á–µ–º–ø–∏–æ–Ω–∞—Ç ‚Äî —é–∂–Ω—ã–π —Ñ–∏–ª–∏–∞–ª</div>
          <p class="muted" style="margin-top:8px">–°–ª–µ–¥–∏—Ç–µ –∑–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏ –≤ —Ç–µ–ª–µ–≥—Ä–∞–º–µ –ú–ï–ö–û–ú (<a href="https://t.me/mekom_info" target="_blank" rel="noopener">@mekom_info</a>)</p>
          <div style="margin-top:12px" class="small muted-2">–û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä—ã: –Ø–Ω ¬∑ –ï–≥–æ—Ä ¬∑ –ê—Ä—Ç–µ–º–∏–π</div>
        </aside>
      </div>
    </section>

    <!-- HOW TO WIN -->
    <section id="how" class="fade-in">
      <h2>–ö–∞–∫ –≤—ã–∏–≥—Ä–∞—Ç—å –í–°–Å</h2>
      <div class="steps" style="margin-top:12px">
        <div class="card">
          <div class="icon">üë•</div>
          <div>
            <h3>1. –°–æ–±–µ—Ä–∏ –∫–æ–º–∞–Ω–¥—É</h3>
            <p class="muted">2‚Äì5 —á–µ–ª–æ–≤–µ–∫ –∏–∑ –∫–ª–∞—Å—Å–∞, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç–µ —Ä–æ–ª–∏: –ø—É—Å—Ç—å —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –∏–≥—Ä–æ–∫ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–∑—É—á–∏—Ç –ø—Ä–∞–≤–∏–ª–∞ –∏ —Ñ–æ—Ä–º—É–ª—ã –∏–≥—Ä—ã)</p>
          </div>
        </div>

        <div class="card">
          <div class="icon">üì•</div>
          <div>
            <h3>2. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ —Å—Ç–∞—Ä—Ç</h3>
            <p class="muted">–†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å —É –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–æ–≤ –∏–ª–∏ —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É ‚Äî –ø–æ–ª—É—á–∏—Ç–µ –æ—Ç—á—ë—Ç –ø–æ —Ñ–∏—Ä–º–µ –∑–∞ –Ω—É–ª–µ–≤–æ–π –ø–µ—Ä–∏–æ–¥ –∏ —Ä–∞–∑–±–æ—Ä –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π.</p>
          </div>
        </div>

        <div class="card">
          <div class="icon">‚öôÔ∏è</div>
          <div>
            <h3>3. –ò–≥—Ä–∞ –≤ —Ä–∞—É–Ω–¥–µ ‚Äî —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –≤–∞–∂–Ω–µ–µ –∞–∑–∞—Ä—Ç–∞</h3>
            <p class="muted">–í –∫–∞–∂–¥–æ–º —Ä–∞—É–Ω–¥–µ –≤—ã –ø—Ä–∏–Ω–∏–º–∞–µ—Ç–µ —Ä–µ—à–µ–Ω–∏—è: –¥–æ–∫—É–ø–∞—Ç—å —Å—Ç–∞–Ω–∫–∏, –≤–∫–ª–∞–¥—ã–≤–∞—Ç—å –≤ —Ä–µ–∫–ª–∞–º—É, –ø–æ–≤—ã—à–∞—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –ø—Ä–æ–¥—É–∫—Ü–∏–∏ –∏ —Ç. –ø.</p>
            <ul class="strategy">
              <li><strong>–†–∞–∑–±–µ—Ä–∏—Ç–µ —Å–≤–æ–∏ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –∏ –ø—Ä–∏–¥—É–º–∞–π—Ç–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏—é.</strong></li>
              <li><strong>–ù–µ –±–æ–π—Ç–µ—Å—å –ø—Ä–æ–¥—É–º–∞–Ω–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π.</strong> –°–º–µ–ª–æ—Å—Ç—å + —Ä–∞—Å—á—ë—Ç = –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ.</li>
            </ul>
          </div>
        </div>

        <div class="card">
          <div class="icon">üéØ</div>
          <div>
            <h3>4. –ü—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ —Å—Ç–∞–¥–∏–π</h3>
            <p class="muted">–û—Ç–±–æ—Ä–æ—á–Ω—ã–µ ‚Üí –í—Ç–æ—Ä–∞—è —Å—Ç–∞–¥–∏—è ‚Üí –ü–æ–ª—É—Ñ–∏–Ω–∞–ª ‚Üí –§–∏–Ω–∞–ª ‚Üí –ü–æ–±–µ–¥–∏—Ç–µ–ª—å.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- HOW TO PLAY (decisions) -->
    <section id="how-play" class="fade-in">
      <h2>–ö–∞–∫ –∏–≥—Ä–∞—Ç—å ‚Äî —Å—É—Ç—å –∏ —Ä–µ—à–µ–Ω–∏—è</h2>
      <p class="muted">–í –∫–∞–∂–¥–æ–º –ø–µ—Ä–∏–æ–¥–µ –≤—ã –ø—Ä–∏–Ω–∏–º–∞–µ—Ç–µ 5 –∫–ª—é—á–µ–≤—ã—Ö —Ä–µ—à–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ —Ñ–æ—Ä–º–∏—Ä—É—é—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ñ–∏—Ä–º—ã –∏ –≤–ª–∏—è—é—Ç –Ω–∞ –†–ò–§.</p>

      <div class="steps" style="margin-top:12px">
        <div class="card small">
          <div class="icon">1</div>
          <div>
            <h3>–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ü–µ–Ω—É</h3>
            <p class="muted">–¶–µ–Ω–∞ –≤–ª–∏—è–µ—Ç –Ω–∞ —Å–ø—Ä–æ—Å, –º–∞—Ä–∂—É –∏ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å.</p>
          </div>
        </div>

        <div class="card small">
          <div class="icon">2</div>
          <div>
            <h3>–ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ</h3>
            <p class="muted">–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–∞ –∏ —É—á–∏—Ç—ã–≤–∞–π—Ç–µ –∑–∞–≥—Ä—É–∑–∫—É —Ñ–∞–±—Ä–∏–∫–∏.</p>
          </div>
        </div>

        <div class="card small">
          <div class="icon">3</div>
          <div>
            <h3>–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥</h3>
            <p class="muted">–í–ª–æ–∂–µ–Ω–∏—è –≤ —Ä–µ–∫–ª–∞–º—É –ø–æ–≤—ã—à–∞—é—Ç –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª —Å–ø—Ä–æ—Å–∞.</p>
          </div>
        </div>

        <div class="card small">
          <div class="icon">4</div>
          <div>
            <h3>–ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏</h3>
            <p class="muted">–ê–º–æ—Ä—Ç–∏–∑–∞—Ü–∏—è –∏ –∫–∞–ø–≤–ª–æ–∂–µ–Ω–∏—è –≤–ª–∏—è—é—Ç –Ω–∞ –º–æ—â–Ω–æ—Å—Ç–∏ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å.</p>
          </div>
        </div>

        <div class="card small">
          <div class="icon">5</div>
          <div>
            <h3>–ù–ò–û–ö–†</h3>
            <p class="muted">–ü–æ–≤—ã—à–∞—é—Ç –∫–∞—á–µ—Å—Ç–≤–æ –∏ –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—É—é –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- PRIZES -->
    <section id="prizes" class="prizes-section fade-in" aria-label="–ü—Ä–∏–∑–æ–≤—ã–µ">
      <div class="section-title">üèÜ –ü—Ä–∏–∑–æ–≤—ã–µ –Ω–∞ –ß–µ–º–ø–∏–æ–Ω–∞—Ç</div>
      <div class="prizes-table" role="list" aria-hidden="false">
        <div class="prize-row highlight" role="listitem">
          <div class="label">1 –º–µ—Å—Ç–æ</div>
          <div class="value"><span class="counter" data-target="1140000">0</span> —ç–∫—Å–∏</div>
        </div>

        <div class="prize-row" role="listitem">
          <div class="label">2 –º–µ—Å—Ç–æ</div>
          <div class="value"><span class="counter" data-target="390000">0</span> —ç–∫—Å–∏</div>
        </div>

        <div class="prize-row" role="listitem">
          <div class="label">–ö–æ–º–∞–Ω–¥—ã –≤–Ω–µ —Ñ–∏–Ω–∞–ª–∞</div>
          <div class="value"><span class="counter" data-target="90000">0</span> —ç–∫—Å–∏</div>
        </div>

        <div class="prize-row" role="listitem">
          <div class="label">–ù–µ –ø—Ä–æ—à–ª–∏ 2 —Å—Ç–∞–¥–∏—é</div>
          <div class="value"><span class="counter" data-target="25000">0</span> —ç–∫—Å–∏</div>
        </div>

        <div class="prize-row" role="listitem">
          <div class="label">–ù–µ –ø—Ä–æ—à–ª–∏ –æ—Ç–±–æ—Ä–æ—á–Ω—ã–µ</div>
          <div class="value"><span class="counter" data-target="5000">0</span> —ç–∫—Å–∏</div>
        </div>
      </div>
    </section>

    <!-- ========================= TOURNAMENT (REPLACED BLOCK) ========================= -->
    <section id="tournament" class="fade-in" aria-label="–¢—É—Ä–Ω–∏—Ä–Ω–∞—è —Å–µ—Ç–∫–∞">
      <h2>–¢—É—Ä–Ω–∏—Ä–Ω–∞—è —Å–µ—Ç–∫–∞ ‚Äî —ç—Ç–∞–ø—ã</h2>

      <div id="mecom-bracket" class="mecom-bracket" data-storage-key="mecom_bracket_state_v4" data-auto-seed="true">
        <div class="mecom-rounds-nav" id="mecomRoundsNav"></div>

        <div class="mecom-swiper" id="mecomSwiper">
          <div class="mecom-swiper-track" id="mecomSwiperTrack"></div>
        </div>

        <div class="mecom-dots" id="mecomDots"></div>
      </div>
    </section>
    <!-- ======================= / TOURNAMENT ======================= -->

    <!-- WHY MEKOM -->
    <section id="why" class="fade-in">
      <h2>–ü–æ—á–µ–º—É –º—ã ‚Äî –ú–ï–ö–û–ú?</h2>
      <div class="why" style="margin-top:8px">
        <div class="badge">–õ–µ–≥–µ–Ω–¥–∞</div>
        <div class="text">
          <p class="muted">–ö–æ–≥–¥–∞ –º—ã —Å–æ–∑–¥–∞–≤–∞–ª–∏ –∫–æ—Ä–ø–æ—Ä–∞—Ü–∏—é, —Ä–µ—à–∏–ª–∏ —Å–¥–µ–ª–∞—Ç—å –ª—ë–≥–∫–∏–π —Ä–µ–≤–µ—Ä–∞–Ω—Å –≤ —Å—Ç–æ—Ä–æ–Ω—É –Ω–∞—à–µ–≥–æ —É—á–∏—Ç–µ–ª—è –ú–∞—Ä–∏–∏ –ï–≥–æ—Ä–æ–≤–Ω—ã ‚Äî –≤–∑—è–ª–∏ –µ—ë ¬´–ú–ï¬ª –∏ –ø—Ä–æ—Å—Ç–æ –¥–æ–∫—Ä—É—Ç–∏–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ. –û—Å—Ç–∞–≤–∏–ª–∏ –∑–Ω–∞–∫–æ–º–æ–µ –∑–≤—É—á–∞–Ω–∏–µ, –Ω–æ —Å–ª–µ–≥–∫–∞ –ø–æ–º–µ–Ω—è–ª–∏ –±—É–∫–≤—É, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏–ª–æ—Å—å —É–Ω–∏–∫–∞–ª—å–Ω–æ. –¢–µ–ø–µ—Ä—å –ú–ï–ö–û–ú ‚Äî —ç—Ç–æ –∏ –ø—Ä–æ –Ω–∞—Å, –∏ –ø—Ä–æ –∏–≥—Ä—É, –∏ –ø—Ä–æ —Ç–æ, —á—Ç–æ –≤ –∂–∏–∑–Ω–∏ –≤—Å–µ–≥–¥–∞ –µ—Å—Ç—å –º–µ—Å—Ç–æ –∫—Ä–µ–∞—Ç–∏–≤—É –∏ —Ö–∏—Ç—Ä–æ—Å—Ç–∏ (–∞ —Ç–∞–∫ –∂–µ –ø–æ–¥—Ö–∞–ª–∏–º—Å—Ç–≤—É).</p>
        </div>
      </div>
    </section>

    <!-- REGISTRATION -->
    <section id="reg" class="fade-in">
      <h2>–ö–∞–∫ –ø—Ä–∏–Ω—è—Ç—å —É—á–∞—Å—Ç–∏–µ</h2>
      <p class="muted">–°–æ–±–µ—Ä–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É, –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –∏ –≥–æ—Ç–æ–≤—å—Ç–µ—Å—å –∫ —Ä–∞—É–Ω–¥–∞–º. –ó–∞–ø–æ–ª–Ω–∏–≤ —Ñ–æ—Ä–º—É, –≤—ã —Å–ø—É—Å—Ç—è –∫–∞–∫–æ–µ-—Ç–æ –≤—Ä–µ–º—è –ø–æ–ª—É—á–∏—Ç–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ/–æ—Ç–∫–∞–∑ –≤ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏. –í —Å–ª—É—á–∞–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∫–æ–º–∞–Ω–¥—ã, –Ω–∞–∑–≤–∞–Ω–∏–µ –≤–∞—à–µ–π –∫–æ–º–∞–Ω–¥—ã –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å—Å—è –Ω–∞ —Å–∞–º–æ–º —Å–∞–π—Ç–µ –≤ —Ç–∞–±–ª–∏—Ü–µ, –∞ –∏–º–µ–Ω–Ω–æ –≤ —Ä–∞–∑–¥–µ–ª–µ –æ—Ç–±–æ—Ä–æ—á–Ω—ã–µ! </p>

      <button class="btn btn-primary submit" type="submit"><a href="https://forms.gle/Zo1daNJ5sn5e5AcJ6" target="_blank" rel="noopener" style="color:inherit">–ü–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ —É—á–∞—Å—Ç–∏–µ</a></button>
    </section>

    <!-- CONTACTS -->
    <section class="fade-in">
      <h2>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h2>
      <p class="muted">
        –¢–µ–ª–µ–≥—Ä–∞–º-–∫–∞–Ω–∞–ª: <a href="https://t.me/mekom_info" target="_blank" rel="noopener">@mekom_info</a><br/>
        –¢–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞: <a href="https://t.me/mekom_chat" target="_blank" rel="noopener">@mekom_chat</a>
      </p>
    </section>

    <footer class="fade-in">
      <div style="font-weight:700">–ö–æ—Ä–ø–æ—Ä–∞—Ü–∏—è –ú–ï–ö–û–ú</div>
      <div class="muted" style="margin-top:6px">–°–¥–µ–ª–∞–Ω–æ –≤ —à–∫–æ–ª–µ, –Ω–æ –Ω–∞ –º–∏—Ä–æ–≤–æ–º —É—Ä–æ–≤–Ω–µ, —Å —Ö–∏—Ç—Ä–æ—Å—Ç—å—é –∏ –¥–µ—Ä–∑–æ—Å—Ç—å—é.</div>
    </footer>
  </div>

<script>
  "use strict";

  /* --------------------
     –û—Å–Ω–æ–≤–Ω—ã–µ –æ–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã –∏ —ç—Ñ—Ñ–µ–∫—Ç—ã (scroll, fade-in, counters, floaters, title-typing)
     –û—Å—Ç–∞–≤–ª–µ–Ω—ã –∏–∑ —Ç–≤–æ–µ–≥–æ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –ª–µ–Ω–¥–∏–Ω–≥–∞ ‚Äî —Ä–∞–±–æ—Ç–∞—é—Ç –≤–º–µ—Å—Ç–µ —Å –Ω–æ–≤–æ–π —Å–µ—Ç–∫–æ–π.
     -------------------- */

  // ----- smooth scroll to id -----
  function scrollToId(id){
    const el = document.getElementById(id);
    if(!el) return;
    el.scrollIntoView({behavior:'smooth',block:'start'});
  }

  // ----- fade-in on scroll -----
  (function initFadeIn(){
    const fades = document.querySelectorAll('.fade-in');
    if(!fades) return;
    const io = new IntersectionObserver((entries)=>{
      entries.forEach(e=>{
        if(e.isIntersecting){
          e.target.classList.add('show');
          io.unobserve(e.target);
        }
      });
    }, {threshold: 0.12});
    fades.forEach(f=>io.observe(f));
  })();

  // ----- format number helper -----
  function formatNumber(n){
    return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ");
  }

  // ----- animateCounter (only define if not present) -----
  if(typeof window.animateCounter !== 'function'){
    window.animateCounter = function(el, target, duration=1200){
      const startTime = performance.now();
      const from = 0;
      function step(now){
        const t = Math.min((now - startTime) / duration, 1);
        const value = Math.floor(from + (target - from) * t);
        el.textContent = formatNumber(value);
        if(t < 1) requestAnimationFrame(step);
        else el.textContent = formatNumber(target);
      }
      requestAnimationFrame(step);
    };
  }

  // ----- initialize prize counters when visible -----
  (function initPrizeCounters(){
    const counters = document.querySelectorAll('.counter');
    if(!counters || counters.length === 0) return;
    const cIO = new IntersectionObserver((entries, obs)=>{
      entries.forEach(en=>{
        if(en.isIntersecting){
          const el = en.target;
          const tgt = parseInt(el.dataset.target, 10) || 0;
          animateCounter(el, tgt, 1300);
          obs.unobserve(el);
        }
      });
    }, {threshold: 0.4});
    counters.forEach(c=> cIO.observe(c));
  })();

  // ----- floating riff animations (randomized) -----
  (function initFloaters(){
    const floaters = document.querySelectorAll('.riff');
    floaters.forEach((el, i)=>{
      el.style.animation = `riff-float ${4 + (i%3)}s ${i*0.3}s ease-in-out infinite`;
    });
    window.addEventListener('scroll', ()=>{
      const sc = window.scrollY;
      floaters.forEach((el, idx)=>{
        const speed = (idx % 2 === 0) ? 0.08 : 0.04;
        el.style.transform = `translateY(${sc * speed}px)`;
      });
    }, {passive:true});
  })();

  // ----- tiny typing for hero title -----
  (function typeTitle(){
    const el = document.getElementById('hero-title');
    if(!el) return;
    const text = el.textContent.trim();
    el.textContent = '';
    let idx = 0;
    function tick(){
      if(idx <= text.length){
        el.textContent = text.slice(0, idx);
        idx++;
        setTimeout(tick, 25);
      } else {
        el.style.borderRight = 'none';
      }
    }
    tick();
  })();

  // ----- form stub (kept simple) -----
  function submitForm(e){
    if(e && e.preventDefault) e.preventDefault();
    const team = (document.querySelector('input[name="team"]') || {}).value || '';
    alert('–ó–∞—è–≤–∫–∞ –ø—Ä–∏–Ω—è—Ç–∞: ' + (team ? team : '–∫–æ–º–∞–Ω–¥–∞ –±–µ–∑ –∏–º–µ–Ω–∏') + '. –û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä—ã —Å–≤—è–∂—É—Ç—Å—è –≤ —Ç–µ–ª–µ–≥—Ä–∞–º–µ.');
  }

  /* ===========================================================
     MECOM BRACKET ‚Äî –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ç—É—Ä–Ω–∏—Ä–Ω–æ–π —Å–µ—Ç–∫–∏
     –í—Å—Ç–∞–≤–ª–µ–Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ, —á—Ç–æ–±—ã –∑–∞–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ä—É—é —Å–µ—Ç–∫—É. –í—Å—ë, —á—Ç–æ –Ω—É–∂–Ω–æ ‚Äî
     –ø—Ä–∞–≤—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é TOURNAMENT_DATA –Ω–∏–∂–µ.
     =========================================================== */
  (function(){
    // –ª–æ–∫–∞–ª—å–Ω—ã–µ –∫–æ—Ä–æ—Ç–∫–∏–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã
    const qs = (s, r=document) => r.querySelector(s);
    const qsa = (s, r=document) => Array.from((r||document).querySelectorAll(s));

    // –†–µ–Ω–¥–µ—Ä-–æ–ø—Ü–∏–∏
    const RENDER_OPTIONS = { keepEmptySlots: false };

    // -----------------------
    // –î–ê–ù–ù–´–ï: –ø—Ä–∞–≤—å —Ç–æ–ª—å–∫–æ —ç—Ç—É –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é (TOURNAMENT_DATA)
    // –ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã: –º–∞—Å—Å–∏–≤ —Ä–∞—É–Ω–¥–æ–≤ -> packs -> teams (team: {name, grade, branch, noDescription, _promotedFrom, _showPromoted})
    // –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –ø–æ–±–µ–¥–∏—Ç–µ–ª–µ–π: pack.winnerIndex (—á–∏—Å–ª–æ) –∏–ª–∏ pack.winnerIndex = [i,j]
    // –ü–æ–º–µ—Ç–∫–∞ —á–µ–º–ø–∏–æ–Ω–∞: round.winnerchamp = { pack: pIndex, index: tIndex } –∏–ª–∏ pack.winnerchampIndex
    // -----------------------
    const TOURNAMENT_DATA = [
  {
    name: "–û—Ç–±–æ—Ä–æ—á–Ω—ã–µ",
    packs: [
      {
        title: "–ü–∞—á–∫–∞ A ‚Äî 7 –∫–ª–∞—Å—Å",
        teams: [
          { name: "–ê–ª—å—Ñ–∞", grade: "7", branch: "–°–µ–≤–µ—Ä" },
          { name: "–ë–µ—Ç–∞",  grade: "7", branch: "–Æ–≥" },
          { name: "–ì–∞–º–º–∞", grade: "7", branch: "–°–µ–≤–µ—Ä" },
          { name: "–î–µ–ª—å—Ç–∞", grade: "7", branch: "–Æ–≥" },
          { name: "–≠–ø—Å–∏–ª–æ–Ω", grade: "7", branch: "–°–µ–≤–µ—Ä" },
          { name: "–î–∑–µ—Ç–∞", grade: "7", branch: "–Æ–≥" }
        ],
        winnerIndex: [0,1]
      },
      {
        title: "–ü–∞—á–∫–∞ B ‚Äî 8 –∫–ª–∞—Å—Å",
        teams: [
          { name: "–≠—Ç–∞", grade: "8", branch: "–°–µ–≤–µ—Ä" },
          { name: "–¢–µ—Ç–∞", grade: "8", branch: "–Æ–≥" },
          { name: "–ô–æ—Ç–∞", grade: "8", branch: "–°–µ–≤–µ—Ä" },
          { name: "–ö–∞–ø–ø–∞", grade: "8", branch: "–Æ–≥" },
          { name: "–õ—è–º–±–¥–∞", grade: "8", branch: "–°–µ–≤–µ—Ä" },
          { name: "–ú—é", grade: "8", branch: "–Æ–≥" }
        ],
        winnerIndex: [0,2]
      },
      {
        title: "–ü–∞—á–∫–∞ C ‚Äî 9 –∫–ª–∞—Å—Å",
        teams: [
          { name: "–ù—é", grade: "9", branch: "–°–µ–≤–µ—Ä" },
          { name: "–ö—Å–∏", grade: "9", branch: "–Æ–≥" },
          { name: "–û–º–∏–∫—Ä–æ–Ω", grade: "9", branch: "–°–µ–≤–µ—Ä" },
          { name: "–ü–∏", grade: "9", branch: "–Æ–≥" },
          { name: "–†–æ", grade: "9", branch: "–°–µ–≤–µ—Ä" },
          { name: "–°–∏–≥–º–∞", grade: "9", branch: "–Æ–≥" }
        ],
        winnerIndex: [4,5]
      },
      {
        title: "–ü–∞—á–∫–∞ C ‚Äî 10 –∏ 11 –∫–ª–∞—Å—Å",
        teams: [
          { name: "–¢–∞—É", grade: "10", branch: "–°–µ–≤–µ—Ä" },
          { name: "–ò–ø—Å–∏–ª–æ–Ω", grade: "10", branch: "–Æ–≥" },
          { name: "–§–∏", grade: "10", branch: "–°–µ–≤–µ—Ä" },
          { name: "–•–∏", grade: "10", branch: "–Æ–≥" },
          { name: "–ü—Å–∏", grade: "11", branch: "–°–µ–≤–µ—Ä" },
          { name: "–û–º–µ–≥–∞", grade: "11", branch: "–Æ–≥" }
        ],
        winnerIndex: [0,5]
      }
    ]
  },
  {
    name: "–í—Ç–æ—Ä–∞—è —Å—Ç–∞–¥–∏—è",
    packs: [
      {
        title: "–ü–∞—á–∫–∞ D ‚Äî 78 —Ä–µ–≥–∏–æ–Ω",
        teams: [
          { name: "–ê–ª—å—Ñ–∞", grade: "7", branch: "–°–µ–≤–µ—Ä" },
          { name: "–ë–µ—Ç–∞",  grade: "7", branch: "–Æ–≥" },
          { name: "–≠—Ç–∞", grade: "8", branch: "–°–µ–≤–µ—Ä" },
          { name: "–ô–æ—Ç–∞", grade: "8", branch: "–°–µ–≤–µ—Ä" }
        ],
        winnerIndex: [0,3]
      },
      {
        title: "–ü–∞—á–∫–∞ E ‚Äî 9,10 –∏ 11 –∫–ª–∞—Å—Å—ã",
        teams: [
          { name: "–†–æ", grade: "9", branch: "–°–µ–≤–µ—Ä" },
          { name: "–°–∏–≥–º–∞", grade: "9", branch: "–Æ–≥" },
          { name: "–¢–∞—É", grade: "10", branch: "–°–µ–≤–µ—Ä" },
          { name: "–û–º–µ–≥–∞", grade: "11", branch: "–Æ–≥" }
        ],
        winnerIndex: [1,3]
      }
    ]
  },
  {
    name: "–ü–æ–ª—É—Ñ–∏–Ω–∞–ª",
    packs: [
      { 
        title: "–ü–∞—á–∫–∞ 1", 
        teams: [ 
          { name: "–ê–ª—å—Ñ–∞", grade: "7", branch: "–°–µ–≤–µ—Ä" }, 
          { name: "–ô–æ—Ç–∞", grade: "8", branch: "–°–µ–≤–µ—Ä" } 
        ],
        winnerIndex: [0]
      },
      { 
        title: "–ü–∞—á–∫–∞ 2", 
        teams: [ 
          { name: "–°–∏–≥–º–∞", grade: "9", branch: "–Æ–≥" }, 
          { name: "–û–º–µ–≥–∞", grade: "11", branch: "–Æ–≥" } 
        ],
        winnerIndex: [1]
      }
    ]
  },
  {
    name: "–§–∏–Ω–∞–ª",
    winnerchamp: { pack: 0, index: 0 },
    packs: [
      {
        title: "–§–∏–Ω–∞–ª—å–Ω–∞—è –ø–∞—á–∫–∞",
        teams: [
          { name: "–ê–ª—å—Ñ–∞", grade: "7", branch: "–°–µ–≤–µ—Ä" },
          { name: "–û–º–µ–≥–∞", grade: "11", branch: "–Æ–≥" }
        ]
      }
    ]
  }
];
 // ----------------------- // –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –º–µ—Ç–æ–¥—ã —Ä–µ–Ω–¥–µ—Ä–∞  // -----------------------
    function deepCopy(obj){ return JSON.parse(JSON.stringify(obj)); }
    function prepareRenderData(src){ return deepCopy(src); }

    // DOM references for this bracket
    const ROOT = qs('#mecom-bracket');
    if(!ROOT){
      console.warn('[MECOM] #mecom-bracket not found ‚Äî —Å–µ—Ç–∫–∞ –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞');
      return;
    }
    const navEl = qs('#mecomRoundsNav', ROOT);
    const swiper = qs('#mecomSwiper', ROOT);
    const track = qs('#mecomSwiperTrack', ROOT);
    const dotsEl = qs('#mecomDots', ROOT);

    // load/save using data-storage-key if provided
    const STORAGE_KEY = ROOT.getAttribute('data-storage-key') || 'mecom_bracket_state_vX';
    const AUTO_SEED = (ROOT.getAttribute('data-auto-seed') || 'true') === 'true';

    let renderData = prepareRenderData(TOURNAMENT_DATA);

    // Render navigation (round chips)
    function renderNav(activeIdx=0){
      navEl.innerHTML = '';
      renderData.forEach((r, idx)=>{
        const btn = document.createElement('button');
        btn.type = 'button';
        btn.className = 'mecom-chip' + (idx === activeIdx ? ' is-active' : '');
        btn.textContent = r.name || `–†–∞—É–Ω–¥ ${idx+1}`;
        btn.addEventListener('click', ()=> goTo(idx));
        navEl.appendChild(btn);
      });
    }

    // Render dots (pager)
    function renderDots(activeIdx=0){
      dotsEl.innerHTML = '';
      renderData.forEach((_, idx)=>{
        const d = document.createElement('div');
        d.className = 'mecom-dot' + (idx === activeIdx ? ' is-active' : '');
        d.addEventListener('click', ()=> goTo(idx));
        dotsEl.appendChild(d);
      });
    }

    // Render slides (each round)
    function renderSlides(){
      track.innerHTML = '';
      renderData.forEach((round, rIndex)=>{
        const slide = document.createElement('div');
        slide.className = 'mecom-slide fade-in';

        // title
        const title = document.createElement('div');
        title.className = 'mecom-round-title';
        const left = document.createElement('div'); left.textContent = round.name || `–†–∞—É–Ω–¥ ${rIndex+1}`;
        title.appendChild(left);
        slide.appendChild(title);

        // Iterate packs
        (round.packs || []).forEach((pack, pIndex)=>{
          const packEl = document.createElement('div');
          packEl.className = 'pack';

          const packTitle = document.createElement('div');
          packTitle.className = 'pack-title';
          packTitle.textContent = pack.title || `–ü–∞—á–∫–∞ ${pIndex+1}`;
          packEl.appendChild(packTitle);

          const contents = document.createElement('div'); contents.className = 'pack-contents';

          (pack.teams || []).forEach((team, tIndex)=>{
            // Empty/team placeholder handling
            if(!team || !team.name){
              if(RENDER_OPTIONS.keepEmptySlots){
                const teamEl = document.createElement('div');
                teamEl.className = 'mecom-team empty-slot placeholder';
                const leftBlock = document.createElement('div'); leftBlock.className = 'left';
                const rightBlock = document.createElement('div'); rightBlock.className = 'name-wrap';
                const nameDiv = document.createElement('div'); nameDiv.className = 'team-name';
                nameDiv.textContent = '(–ø—É—Å—Ç–æ)';
                rightBlock.appendChild(nameDiv);
                teamEl.appendChild(leftBlock);
                teamEl.appendChild(rightBlock);
                contents.appendChild(teamEl);
              }
              return;
            }

            const teamEl = document.createElement('div');
            teamEl.className = 'mecom-team';

            // winner highlighting (pack-level)
            if(typeof pack.winnerIndex === 'number' && pack.winnerIndex === tIndex) teamEl.classList.add('winner');
            else if(Array.isArray(pack.winnerIndex) && pack.winnerIndex.includes(tIndex)) teamEl.classList.add('winner');

            // champion detection (pack-level or round-level)
            const isChampion =
              (typeof pack.winnerchampIndex === 'number' && pack.winnerchampIndex === tIndex)
              || (round && round.winnerchamp && round.winnerchamp.pack === pIndex && round.winnerchamp.index === tIndex);

            if(isChampion){
              teamEl.classList.add('champion');
              teamEl.classList.remove('winner'); // champion visual takes precedence
            }

            // left block (grade + branch) unless explicitly hidden
            const leftBlock = document.createElement('div'); leftBlock.className = 'left';
            if(!(team && team.noDescription)){
              const cls = document.createElement('span'); cls.className = 'mecom-tag mecom-tag-grade';
              cls.textContent = team && team.grade ? `${team.grade} –∫–ª–∞—Å—Å` : '';
              const br = document.createElement('span');
              let branchClass = '';
              if(team && team.branch){
                const b = String(team.branch).toLowerCase();
                if(b.includes('—Å–µ–≤–µ—Ä')) branchClass = 'mecom-tag-north';
                else if(b.includes('—é–≥')) branchClass = 'mecom-tag-south';
                else if(b.includes('–≤–æ—Å—Ç')) branchClass = 'mecom-tag-east';
                else if(b.includes('–∑–∞–ø')) branchClass = 'mecom-tag-west';
                else branchClass = 'mecom-tag-north';
              }
              br.className = 'mecom-tag ' + branchClass;
              br.textContent = team && team.branch ? team.branch : '';
              leftBlock.appendChild(cls);
              leftBlock.appendChild(br);
            }

            // right block (name)
            const rightBlock = document.createElement('div'); rightBlock.className = 'name-wrap';
            const nameDiv = document.createElement('div'); nameDiv.className = 'team-name';
            nameDiv.textContent = team && team.name ? team.name : '(–ø—É—Å—Ç–æ)';
            rightBlock.appendChild(nameDiv);

            // optionally show promoted-note if present and flagged
            if(team && team._promotedFrom && team._showPromoted && !(team.noDescription)){
              const note = document.createElement('div');
              note.className = 'promoted-note';
              note.textContent = `–ø—Ä–æ—Ö–æ–¥–∏—Ç –∏–∑: ${team._promotedFrom.roundName} ¬∑ ${team._promotedFrom.packTitle}`;
              rightBlock.appendChild(note);
            }

            teamEl.appendChild(leftBlock);
            teamEl.appendChild(rightBlock);
            contents.appendChild(teamEl);
          });

          packEl.appendChild(contents);
          slide.appendChild(packEl);
        });

        track.appendChild(slide);
      });

      // trigger fade-ins (after DOM insert)
      requestAnimationFrame(()=> {
        qsa('.mecom-slide.fade-in', track).forEach(el => el.classList.add('show'));
        setTimeout(()=> updateHeightForSlide(current), 30);
      });
    }

    // -----------------------
    // Swiper: touch + mouse drag
    // -----------------------
    let current = 0;
    let startX = 0, startY = 0, curX = 0;
    let dragging = false;
    let width = 0;
    let lastMoveAt = 0;

    function setTranslate(px, withAnim=true){
      track.style.transition = withAnim ? 'transform .26s ease' : 'none';
      track.style.transform = `translate3d(${px}px,0,0)`;
    }

    function updateWidth(){ width = swiper.clientWidth || 1; }
    window.addEventListener('resize', ()=>{ updateWidth(); setTranslate(-current*width, false); updateHeightForSlide(current); });

    function updateHeightForSlide(i){
      const slide = track.children[i];
      if(!slide){
        swiper.style.height = '120px';
        return;
      }
      const rect = slide.getBoundingClientRect();
      const h = Math.ceil(rect.height);
      const minH = 80;
      swiper.style.height = (Math.max(h, minH)) + 'px';
    }

    function goTo(i){
      current = Math.max(0, Math.min(i, renderData.length-1));
      setTranslate(-current*width, true);
      setTimeout(()=> updateHeightForSlide(current), 120);
      // update chips and dots
      const chips = navEl.querySelectorAll('.mecom-chip');
      chips.forEach((c, idx)=> c.classList.toggle('is-active', idx===current));
      const dots = dotsEl.querySelectorAll('.mecom-dot');
      dots.forEach((d, idx)=> d.classList.toggle('is-active', idx===current));
    }

    function onStart(e){
      const touch = e.touches ? e.touches[0] : e;
      startX = touch.clientX;
      startY = touch.clientY;
      curX = startX;
      dragging = true;
      lastMoveAt = performance.now();
      track.style.transition = 'none';
    }
    function onMove(e){
      if(!dragging) return;
      const touch = e.touches ? e.touches[0] : e;
      const dx = touch.clientX - startX;
      const dy = touch.clientY - startY;
      if(Math.abs(dy) > Math.abs(dx)){ dragging = false; setTranslate(-current*width, false); return; }
      e.preventDefault();
      curX = touch.clientX;
      const base = -current * width;
      setTranslate(base + dx, false);
      lastMoveAt = performance.now();
    }
    function onEnd(){
      if(!dragging) return;
      dragging = false;
      const dx = (curX || startX) - startX;
      const dt = Math.max(1, performance.now() - lastMoveAt);
      const velocity = Math.abs(dx)/dt;
      const threshold = width * 0.18;
      if(dx < -threshold || (dx < -10 && velocity > 0.6)) goTo(current + 1);
      else if(dx > threshold || (dx > 10 && velocity > 0.6)) goTo(current - 1);
      else goTo(current);
    }

    function attachSwipe(){
      updateWidth();
      updateHeightForSlide(current);
      // touch
      swiper.addEventListener('touchstart', onStart, {passive:true});
      swiper.addEventListener('touchmove',  onMove,  {passive:false});
      swiper.addEventListener('touchend',   onEnd,   {passive:true});
      // mouse desktop
      swiper.addEventListener('mousedown', (e)=>{ e.preventDefault(); onStart(e); });
      window.addEventListener('mousemove', onMove);
      window.addEventListener('mouseup', onEnd);
    }

    // -----------------------
    // Persistence: load/save (localStorage)
    // -----------------------
    function saveState(obj){
      try{ localStorage.setItem(STORAGE_KEY, JSON.stringify(obj)); }catch(e){}
    }
    function loadState(){
      try{
        const raw = localStorage.getItem(STORAGE_KEY);
        if(!raw) return null;
        return JSON.parse(raw);
      }catch(e){ return null; }
    }

    // -----------------------
    // Render wrapper + helpers: initialize, render nav/dots/slides
    // -----------------------
    function renderAll(){
      renderSlides();
      renderNav(current);
      renderDots(current);
      // set initial position
      setTranslate(-current*width, false);
      updateHeightForSlide(current);
    }

    function init(){
      // Attempt to load persisted state (but do not auto-promote winners)
      const saved = loadState();
      if(saved && Array.isArray(saved)){
        renderData = saved;
      }else if(saved && saved.rounds){
        // support older format (rounds) ‚Äî convert
        renderData = Array.isArray(saved.rounds) ? saved.rounds.map(r=>{
          return { name: r.name, packs: [ { title: '–°–ª–æ—Ç—ã', teams: (r.teams||[]).map(t=>({name:t})) } ] };
        }) : prepareRenderData(TOURNAMENT_DATA);
      } else {
        // no saved state ‚Äî use default
        renderData = prepareRenderData(TOURNAMENT_DATA);
      }

      // Render and wire interactions
      renderAll();
      attachSwipe();

      // expose small API for debugging from console
      window.MECOM_BRACKET_V2 = {
        getState: ()=> deepCopy(renderData),
        setState: (obj)=>{ if(Array.isArray(obj)){ renderData = deepCopy(obj); saveState(renderData); renderAll(); } },
        resetDefaults: ()=> { renderData = prepareRenderData(TOURNAMENT_DATA); saveState(renderData); renderAll(); }
      };
    }

    init();

  })(); // end bracket IIFE
</script>
</body>
</html>

